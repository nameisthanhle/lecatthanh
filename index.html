<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Infinite Plane with Images</title>
<style>
  html, body { margin: 0; padding: 0; overflow: hidden; background: black; }
  canvas { display: block; }
  #introOverlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-family: sans-serif;
    font-size: 24px;
    z-index: 10;
    text-align: center;
    cursor: pointer;
  }
  #crosshair {
    position: fixed;
    top: 50%; left: 50%;
    width: 20px; height: 20px;
    margin-left: -10px;
    margin-top: -10px;
    pointer-events: none;
    z-index: 5;
  }
  #crosshair::before, #crosshair::after {
    content: '';
    position: absolute;
    background: white;
  }
  #crosshair::before {
    left: 50%; top: 0;
    width: 2px; height: 100%;
    transform: translateX(-50%);
  }
  #crosshair::after {
    top: 50%; left: 0;
    width: 100%; height: 2px;
    transform: translateY(-50%);
  }
</style>
</head>
<body>
<div id="introOverlay">Welcome!<br>Right-click or click to start exploring.</div>
<div id="crosshair"></div>
<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js';
import { PointerLockControls } from 'https://cdn.jsdelivr.net/npm/three@0.152.2/examples/jsm/controls/PointerLockControls.js';

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);

const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0, 2, 5);

const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
document.body.appendChild(renderer.domElement);

const controls = new PointerLockControls(camera, renderer.domElement);

// Light
const ambientLight = new THREE.AmbientLight(0xffffff, 1);
scene.add(ambientLight);

// Infinite plane (large plane, can extend)
const planeSize = 1000;
const planeGeometry = new THREE.PlaneGeometry(planeSize, planeSize);
const planeMaterial = new THREE.MeshStandardMaterial({ color: 0x111111 });
const plane = new THREE.Mesh(planeGeometry, planeMaterial);
plane.rotation.x = -Math.PI/2;
scene.add(plane);

// Images scattered randomly
const textureLoader = new THREE.TextureLoader();
const imageUrls = [
  'https://picsum.photos/id/1015/256/256',
  'https://picsum.photos/id/1016/256/256',
  'https://picsum.photos/id/1018/256/256',
  'https://picsum.photos/id/1020/256/256',
  'https://picsum.photos/id/1024/256/256'
];

const imagePlanes = [];
for(let i=0; i<50; i++){
  const url = imageUrls[Math.floor(Math.random()*imageUrls.length)];
  const tex = textureLoader.load(url);
  const geom = new THREE.PlaneGeometry(2,2);
  const mat = new THREE.MeshBasicMaterial({ map: tex, side: THREE.DoubleSide });
  const mesh = new THREE.Mesh(geom, mat);
  mesh.position.set(
    (Math.random()-0.5)*500,
    1 + Math.random()*2,
    (Math.random()-0.5)*500
  );
  mesh.rotation.y = Math.random()*Math.PI*2;
  scene.add(mesh);
  imagePlanes.push(mesh);
}

// Intro overlay and crosshair logic
const introOverlay = document.getElementById('introOverlay');
const crosshair = document.getElementById('crosshair');
crosshair.style.display = 'none';

function togglePointerLock() {
  if (document.pointerLockElement === renderer.domElement) {
    document.exitPointerLock();
    crosshair.style.display = 'none';
    introOverlay.style.display = 'flex';
  } else {
    controls.lock();
    crosshair.style.display = 'block';
    introOverlay.style.display = 'none';
  }
}

// Click or right-click to start / toggle
introOverlay.addEventListener('click', togglePointerLock);
document.addEventListener('contextmenu', function(e){
  e.preventDefault();
  togglePointerLock();
});

// Movement
const moveSpeed = 0.2;
const velocity = new THREE.Vector3();
const keys = {};
document.addEventListener('keydown', e=> keys[e.code]=true);
document.addEventListener('keyup', e=> keys[e.code]=false);

// Animation loop
function animate() {
  requestAnimationFrame(animate);

  if (controls.isLocked) {
    velocity.set(0,0,0);
    if(keys['KeyW']) velocity.z -= moveSpeed;
    if(keys['KeyS']) velocity.z += moveSpeed;
    if(keys['KeyA']) velocity.x -= moveSpeed;
    if(keys['KeyD']) velocity.x += moveSpeed;

    controls.moveRight(velocity.x);
    controls.moveForward(velocity.z);
  }

  renderer.render(scene, camera);
}
animate();

// Handle resize
window.addEventListener('resize', () => {
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
