<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Infinite Plane Exploration</title>
<style>
  html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    height: 100%;
    background: black;
    cursor: crosshair;
  }
  #introOverlay {
    position: absolute;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(0,0,0,0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
    font-family: sans-serif;
    font-size: 2em;
    text-align: center;
    z-index: 10;
    cursor: pointer;
  }
  #crosshair {
    position: absolute;
    top: 50%; left: 50%;
    width: 20px; height: 20px;
    margin-left: -10px;
    margin-top: -10px;
    pointer-events: none;
    z-index: 5;
  }
  #crosshair:before, #crosshair:after {
    content: '';
    position: absolute;
    background: white;
  }
  #crosshair:before {
    left: 50%; top: 0;
    width: 2px; height: 100%;
    margin-left: -1px;
  }
  #crosshair:after {
    top: 50%; left: 0;
    width: 100%; height: 2px;
    margin-top: -1px;
  }
</style>
</head>
<body>
<div id="introOverlay">Welcome!<br>Click anywhere to start exploring</div>
<div id="crosshair" style="display:none;"></div>
<script type="module">
import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.module.js';

let scene, camera, renderer;
let planeGroup;
let isActive = false;

const introOverlay = document.getElementById('introOverlay');
const crosshair = document.getElementById('crosshair');

// ----- Scene Setup -----
scene = new THREE.Scene();
scene.background = new THREE.Color(0x000000);

// ----- Camera -----
camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.1, 1000);
camera.position.set(0, 0, 5);

// ----- Renderer -----
renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
document.body.appendChild(renderer.domElement);

// ----- Plane Group -----
planeGroup = new THREE.Group();
scene.add(planeGroup);

// ----- Add Random Images as Planes -----
const loader = new THREE.TextureLoader();
const imageUrls = [
  'https://picsum.photos/200/200?random=1',
  'https://picsum.photos/200/200?random=2',
  'https://picsum.photos/200/200?random=3',
  'https://picsum.photos/200/200?random=4',
  'https://picsum.photos/200/200?random=5'
];

for (let i=0;i<50;i++){
  const tex = loader.load(imageUrls[Math.floor(Math.random()*imageUrls.length)]);
  const mat = new THREE.MeshBasicMaterial({map: tex});
  const geo = new THREE.PlaneGeometry(1,1);
  const mesh = new THREE.Mesh(geo, mat);
  mesh.position.x = (Math.random()-0.5)*50;
  mesh.position.y = (Math.random()-0.5)*50;
  mesh.position.z = (Math.random()-0.5)*50;
  planeGroup.add(mesh);
}

// ----- Lighting -----
const ambient = new THREE.AmbientLight(0xffffff, 1);
scene.add(ambient);

// ----- Resize -----
window.addEventListener('resize', ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});

// ----- Pointer Lock & Start -----
function startExploration(){
  introOverlay.style.display = 'none';
  crosshair.style.display = 'block';
  isActive = true;
  document.body.requestPointerLock();
}

introOverlay.addEventListener('click', startExploration);

// ----- Mouse Movement Controls -----
let moveX=0, moveY=0;
document.addEventListener('mousemove', (e)=>{
  if(isActive){
    moveX = e.movementX*0.01;
    moveY = e.movementY*0.01;
  }
});

// ----- Animate -----
function animate(){
  requestAnimationFrame(animate);
  if(isActive){
    // Move the plane group opposite to mouse to create "flying over the plane" effect
    planeGroup.position.x -= moveX;
    planeGroup.position.y += moveY;
  }
  renderer.render(scene, camera);
}
animate();
</script>
</body>
</html>
